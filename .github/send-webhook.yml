name: Send Webhook

on:
  push:
    branches:
      - main  # mainãƒ–ãƒ©ãƒ³ãƒã«pushã•ã‚ŒãŸæ™‚ã«ãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã‚‹

jobs:
  send-webhook:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Send Discord Webhook
      run: |
        curl -X POST ${{ secrets.DISCORD_WEBHOOK_URL }} \
        -H "Content-Type: application/json" \
        -d '{
          "embeds": [
            {
              "title": "ğŸ æ–°ã—ã„å¯„ä»˜ãŒã‚ã‚Šã¾ã—ãŸï¼",
              "color": 5763719,
              "fields": [
                {"name": "ğŸ†” Minecraft ID", "value": "${{ secrets.MC_ID }}", "inline": true},
                {"name": "ğŸ’¬ Discord ID", "value": "${{ secrets.DISCORD_ID }}", "inline": true},
                {"name": "ğŸ® ã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³", "value": "${{ secrets.VERSION }}", "inline": true},
                {"name": "ğŸ’µ å¯„ä»˜ãƒ—ãƒ©ãƒ³", "value": "${{ secrets.PLAN_NAME }}", "inline": true}
              ],
              "footer": {
                "text": "ğŸ‰ ã”æ”¯æ´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼"
              },
              "timestamp": "'$(date --utc +%FT%TZ)'"
            }
          ]
        }'
