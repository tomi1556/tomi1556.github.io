/* --- グローバル設定 --- */
:root {
    --primary-color: #5E81AC;  /* 少し落ち着いたブルー */
    --secondary-color: #88C0D0; /* 明るい水色 */
    --accent-color: #EBCB8B;   /* アクセントのイエローゴールド */
    --dark-bg: #2E3440;      /* メインのダーク背景 */
    --light-bg: #3B4252;     /* カードなどの少し明るい背景 */
    --lighter-bg: #434C5E;   /* ホバー時など */
    --text-color: #ECEFF4;     /* メインテキスト */
    --text-muted: #D8DEE9;   /* 少し暗いテキスト */
    --border-color: #4C566A;
    --font-primary: 'Poppins', 'Noto Sans JP', sans-serif;
    --font-secondary: 'Noto Sans JP', sans-serif;
    --shadow-sm: 0 2px 5px rgba(0,0,0,0.15);
    --shadow-md: 0 5px 15px rgba(0,0,0,0.2);
    --border-radius-sm: 6px;
    --border-radius-md: 10px;
    --transition-fast: 0.2s ease-out;
    --transition-normal: 0.3s ease-out;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font-primary);
    background-color: var(--dark-bg);
    color: var(--text-color);
    line-height: 1.75; /* 少し広めに */
    font-size: 16px; /* ベースフォントサイズ */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

html {
    scroll-behavior: smooth;
}

.container {
    width: 90%;
    max-width: 1100px; /* 少し狭めてコンテンツ密度を上げる */
    margin: 0 auto;
    padding: 0 15px;
}

img {
    max-width: 100%;
    height: auto;
    display: block;
}

a {
    text-decoration: none;
    color: var(--secondary-color);
    transition: color var(--transition-fast);
}
a:hover {
    color: var(--accent-color);
}

h1, h2, h3, h4 {
    font-family: var(--font-primary);
    font-weight: 600; /* 少し太く */
    margin-bottom: 0.75em;
    color: var(--text-color);
    line-height: 1.3;
}
h1 { font-size: clamp(2.4em, 5.5vw, 3.8em); font-weight: 700; }
h2 { font-size: clamp(1.8em, 4vw, 2.5em); margin-bottom: 1.2em; text-align: center; }
h3 { font-size: clamp(1.2em, 2.5vw, 1.5em); }
h4 { font-size: clamp(1.0em, 2vw, 1.1em); font-weight: 500;}


p {
    margin-bottom: 1em;
    font-family: var(--font-secondary);
    color: var(--text-muted);
    font-size: clamp(0.9rem, 1.8vw, 1rem); /* ベースより少し小さめも許容 */
}
.small-text { font-size: 0.85em; color: #A3B1CC; }

code {
    background-color: var(--lighter-bg);
    padding: 0.25em 0.6em;
    border-radius: var(--border-radius-sm);
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
    color: var(--accent-color);
    border: 1px solid var(--border-color);
    font-size: 0.9em;
}

/* --- ヘッダー --- */
header {
    background-color: rgba(46, 52, 64, 0.8); /* var(--dark-bg) の透明版 */
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    padding: 12px 0; /* 少しコンパクトに */
    position: fixed;
    width: 100%;
    top: 0;
    left: 0;
    z-index: 1000;
    transition: background-color var(--transition-normal), box-shadow var(--transition-normal), padding var(--transition-normal);
    border-bottom: 1px solid transparent;
}
header.scrolled {
    background-color: var(--dark-bg);
    box-shadow: var(--shadow-md);
    padding: 10px 0; /* スクロール時さらにコンパクトに */
    border-bottom: 1px solid var(--border-color);
}
header .container {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
#logo-img {
    height: 40px; /* 少し小さく */
    transition: transform var(--transition-fast);
}
#logo-img:hover {
    transform: scale(1.03);
}

.main-nav ul {
    list-style: none;
    display: flex;
    align-items: center; /* 中央揃え */
}
.main-nav ul li {
    margin-left: 25px; /* 少し詰める */
}
.main-nav ul li a {
    color: var(--text-color);
    font-weight: 500; /* 少し細くして洗練 */
    font-size: 0.9rem;
    padding: 6px 0;
    position: relative;
    letter-spacing: 0.3px;
}
.main-nav ul li a::after {
    content: '';
    position: absolute;
    bottom: -2px; /* 少し下に */
    left: 0;
    width: 0;
    height: 2px;
    background-color: var(--accent-color);
    transition: width var(--transition-fast);
}
.main-nav ul li a:hover::after,
.main-nav ul li a.active::after {
    width: 100%;
}

/* ハンバーガーメニュー */
.hamburger-menu {
    display: none;
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    z-index: 1001;
    margin-left: 15px; /* 他の要素との間隔 */
}
.hamburger-menu span {
    display: block;
    width: 22px; /* 少し小さく */
    height: 2px; /* 細く */
    background-color: var(--text-color);
    margin: 5px 0;
    transition: all var(--transition-normal);
    border-radius: 2px;
}
.hamburger-menu.active span:nth-child(1) {
    transform: translateY(7px) rotate(45deg);
}
.hamburger-menu.active span:nth-child(2) {
    opacity: 0;
}
.hamburger-menu.active span:nth-child(3) {
    transform: translateY(-7px) rotate(-45deg);
}

/* --- ボタン --- */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 10px 24px; /* 少しコンパクトに */
    border-radius: var(--border-radius-sm);
    font-weight: 600;
    font-size: 0.9rem;
    text-transform: none; /* 通常のテキストに */
    letter-spacing: 0.2px;
    transition: all var(--transition-fast);
    cursor: pointer;
    border: none;
    box-shadow: var(--shadow-sm);
    white-space: nowrap; /* ボタン内テキストが折り返さないように */
}
.btn-icon-left {
    margin-right: 8px;
    font-size: 1.1em; /* アイコンサイズ調整 */
}
.btn-primary {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: #2E3440; /* 暗い背景色に合うテキスト色 */
}
.btn-primary:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 4px 10px rgba(var(--rgb-primary-color, 94, 129, 172), 0.35); /* CSS変数からRGB値を取得する工夫が必要な場合あり */
    color: #2E3440;
}
.btn-secondary {
    background-color: transparent;
    color: var(--secondary-color);
    border: 1.5px solid var(--secondary-color);
}
.btn-secondary:hover {
    background-color: var(--secondary-color);
    color: var(--dark-bg);
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 4px 10px rgba(var(--rgb-secondary-color, 136, 192, 208), 0.3);
}
.btn-discord {
    background-color: #5865F2;
    color: #fff;
    border: 1.5px solid #5865F2;
}
.btn-discord:hover {
    background-color: #4B57D0;
    border-color: #4B57D0;
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 4px 10px rgba(88, 101, 242, 0.3);
    color: #fff;
}


/* --- ヒーローセクション --- */
#hero {
    min-height: 90vh; /* 少し低くしてスクロールを促す */
    background: url('images/hero-background.jpg') no-repeat center center/cover; /* images/hero-background.jpg を配置 */
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding-top: 70px; /* 固定ヘッダーの高さ */
    overflow: hidden; /* アニメーション要素がはみ出ないように */
}
.hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, rgba(46, 52, 64, 0.6) 0%, rgba(46, 52, 64, 0.85) 70%, var(--dark-bg) 100%);
}
.hero-content {
    position: relative;
    z-index: 2;
    animation: heroicContentAnimation 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    padding-bottom: 30px; /* ボタンとの間隔 */
}
@keyframes heroicContentAnimation {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
#hero h1 {
    color: #fff;
    text-shadow: 0 2px 8px rgba(0,0,0,0.5);
    margin-bottom: 0.4em;
}
#hero .subtitle {
    color: var(--text-muted);
    margin-bottom: 2em; /* ボタンとの間隔 */
    max-width: 550px;
    margin-left: auto;
    margin-right: auto;
}
.hero-buttons {
    display: flex;
    gap: 15px; /* 少し詰める */
    justify-content: center;
    flex-wrap: wrap;
}
.hero-buttons .btn {
    min-width: 170px; /* 少し小さく */
}

/* --- コンテンツセクション共通 --- */
.content-section {
    padding: 70px 0; /* 少し詰める */
}
.content-section.alt-bg {
    background-color: var(--light-bg);
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
}
.page-title { /* rules.html, support.html 用 */
    text-align: center;
    font-size: clamp(2em, 5vw, 2.8em);
    margin-bottom: 1em;
    color: var(--primary-color);
}
.page-title i { margin-right: 10px; }
.page-intro { /* rules.html, support.html 用 */
    text-align: center;
    font-size: clamp(0.95em, 2vw, 1.05em);
    max-width: 650px;
    margin: 0 auto 2.5em auto;
    color: var(--text-muted);
}

/* --- Features (魅力) セクション --- */
#features h2 {
    margin-bottom: 50px;
}
.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(230px, 1fr)); /* 最小幅調整 */
    gap: 25px; /* 少し詰める */
}
.feature-card {
    background-color: var(--light-bg);
    padding: 25px;
    border-radius: var(--border-radius-md);
    text-align: center;
    box-shadow: none; /* フラットデザインに近づける */
    transition: transform var(--transition-normal), background-color var(--transition-normal);
    border: 1px solid var(--border-color);
    display: flex;
    flex-direction: column; /* アイコン、タイトル、説明を縦に */
    align-items: center;
}
.feature-card:hover {
    transform: translateY(-6px);
    background-color: var(--lighter-bg);
}
.feature-icon-wrapper {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: var(--primary-color);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 18px;
    color: var(--dark-bg);
    flex-shrink: 0; /* アイコンが縮まないように */
}
.feature-icon-wrapper i {
    font-size: 1.6em; /* アイコンサイズ */
}
.feature-card h3 {
    color: var(--secondary-color);
    font-size: 1.25em;
    margin-bottom: 8px;
}
.feature-card p {
    font-size: 0.9rem;
    color: var(--text-muted);
    line-height: 1.6; /* pタグの行間を調整 */
    flex-grow: 1; /* カードの高さを揃えるために説明文でスペースを埋める */
}

/* --- Join (参加方法) セクション --- */
#join h2 {
    margin-bottom: 40px;
}
.join-methods {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* 最小幅調整 */
    gap: 25px;
}
.join-card {
    background-color: var(--light-bg);
    padding: 20px 25px; /* コンパクトに */
    border-radius: var(--border-radius-md);
    border: 1px solid var(--border-color);
    transition: transform var(--transition-normal), background-color var(--transition-normal);
}
.join-card:hover {
    transform: translateY(-4px);
    background-color: var(--lighter-bg);
}
.join-platform {
    display: flex;
    align-items: center;
    margin-bottom: 12px;
}
.platform-icon {
    font-size: 1.8em;
    color: var(--primary-color);
    margin-right: 12px;
    width: 30px; /* アイコン幅固定 */
    text-align: center;
}
.join-card h4 {
    color: var(--secondary-color);
    font-size: 1.15em;
    margin-bottom: 0; /* h4のデフォルトマージン除去 */
}
.join-label {
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: 4px;
    font-weight: 500;
}
.address-copy-group {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 6px; /* feedbackとの間隔 */
}
.address-copy-group .server-address {
    flex-grow: 1; /* アドレス表示部分を広げる */
    padding: 6px 10px; /* コンパクトに */
    margin-bottom: 0; /* グループでマージン管理 */
    overflow: hidden;
    text-overflow: ellipsis; /* 長い場合に省略 */
    white-space: nowrap;
}
.copy-btn {
    background-color: var(--lighter-bg);
    color: var(--text-color);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    padding: 6px 10px;
    cursor: pointer;
    transition: background-color var(--transition-fast);
}
.copy-btn:hover {
    background-color: var(--primary-color);
    color: var(--dark-bg);
}
.copy-btn i { font-size: 0.9em; }
.copy-feedback {
    font-size: 0.8em;
    color: var(--accent-color);
    height: 1.3em;
    opacity: 0; /* 初期は非表示 */
    transition: opacity var(--transition-fast);
    margin-top: 0; /* グループでマージン管理 */
    margin-bottom: 5px;
}
.join-note {
    margin-top: 10px;
    font-size: 0.8rem;
}


/* --- Rules Preview / Support Preview --- */
#rules-preview, #support-preview {
    text-align: center;
}
#rules-preview p, #support-preview p {
    max-width: 550px;
    margin: 0 auto 25px auto;
    font-size: 0.95rem;
}
.rules-highlights {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 25px;
    flex-wrap: wrap;
}
.rule-highlight {
    background-color: var(--light-bg);
    padding: 8px 12px;
    border-radius: var(--border-radius-sm);
    font-size: 0.85rem;
    border: 1px solid var(--border-color);
    color: var(--text-muted);
}
.rule-highlight i {
    margin-right: 6px;
}
.rule-highlight .fa-check-circle { color: var(--secondary-color); }
.rule-highlight .fa-times-circle, .rule-highlight .fa-gavel { color: #BF616A; /* Nord Red */ }

/* --- WebMap Promo / Discord Promo --- */
#webmap-promo, #discord-promo { text-align: center; }
#webmap-promo p, #discord-promo .discord-content p {
    max-width: 550px;
    margin: 0 auto 25px auto;
    font-size: 0.95rem;
}
#webmap-promo i.fa-map-marked-alt, #discord-promo i.fa-discord {
     margin-right: 8px;
}
.discord-bg {
    background: linear-gradient(135deg, #5865F2, #4A54C9); /* 少し暗めに調整 */
    color: #fff;
    padding: 60px 0; /* 通常より少しパディング少なめ */
}
.discord-bg h2, .discord-bg p { color: #fff; }


/* --- Footer --- */
footer {
    background-color: var(--dark-bg);
    border-top: 1px solid var(--border-color);
    padding: 30px 0; /* コンパクトに */
    text-align: center;
}
footer p {
    color: var(--text-muted);
    font-size: 0.85rem;
    margin-bottom: 4px;
}

/* --- 別ページ用スタイル (Rules, Support) は前回のを流用。必要に応じて調整 --- */
/* ... (省略 - 前回のCSSの .page-content, .rules-section など) ... */
/* 必要ならここに rules.html と support.html 用の調整済みスタイルを追加 */
.page-content {
    padding-top: 100px; /* ヘッダー分 + 余白 */
    padding-bottom: 50px;
}


/* --- レスポンシブ対応 --- */
@media (max-width: 992px) {
    .features-grid {
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); /* 2カラムになりやすいように */
    }
    .join-methods {
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    }
     #hero h1 { font-size: clamp(2em, 7vw, 3.2em); }
    #hero .subtitle { font-size: clamp(0.95em, 3vw, 1.2em); }
}

@media (max-width: 768px) {
    .main-nav {
        display: none;
        position: absolute;
        top: calc(100% + 1px); /* ヘッダー直下に表示 (scrolled時も対応) */
        left: 0;
        width: 100%;
        background-color: var(--dark-bg);
        flex-direction: column;
        padding: 10px 0; /* 上下パディング */
        box-shadow: 0 8px 10px rgba(0,0,0,0.2);
        border-top: 1px solid var(--border-color);
        max-height: calc(100vh - 60px); /* ヘッダー分を引いた高さに制限 */
        overflow-y: auto; /* メニュー項目が多い場合にスクロール */
    }
    .main-nav.active {
        display: flex;
    }
    .main-nav ul {
        flex-direction: column;
        width: 100%;
    }
    .main-nav ul li {
        margin: 0;
        width: 100%; /* 幅いっぱいに */
    }
    .main-nav ul li a {
        display: block;
        padding: 12px 20px; /* パディング調整 */
        text-align: left; /* 左寄せ */
        border-bottom: 1px solid var(--border-color);
        font-size: 1rem;
    }
    .main-nav ul li:last-child a {
        border-bottom: none;
    }
    .main-nav ul li a::after { display: none; }

    .hamburger-menu { display: block; }

    #hero {
        min-height: 70vh; /* スマホでは少し低く */
        padding: 80px 0 50px 0;
    }
    .hero-buttons {
        flex-direction: column;
        gap: 12px;
    }
    .hero-buttons .btn {
        width: 90%;
        max-width: 280px;
        margin: 0 auto;
        padding: 12px 20px; /* スマホボタンパディング調整 */
    }

    h1 { font-size: clamp(1.8em, 6vw, 2.4em); }
    h2 { font-size: clamp(1.5em, 5vw, 2em); }
    .content-section { padding: 50px 0; }

    .features-grid,
    .join-methods {
        grid-template-columns: 1fr; /* スマホでは1カラム */
        gap: 20px;
    }
    .feature-card, .join-card {
        padding: 20px; /* スマホカードパディング */
    }
    .feature-card p { font-size: 0.85rem; }
}

@media (max-width: 480px) {
    body { font-size: 15px; } /* ベースフォント微調整 */
    .container { width: 95%; padding: 0 10px; }

    .btn { padding: 10px 18px; font-size: 0.85rem; }
    .hero-buttons .btn { width: 100%; max-width: 260px; }

    .feature-icon-wrapper { width: 50px; height: 50px; margin-bottom: 15px;}
    .feature-icon-wrapper i { font-size: 1.4em; }
    .feature-card h3 { font-size: 1.1em; }

    .platform-icon { font-size: 1.6em; margin-right: 10px; }
    .join-card h4 { font-size: 1.05em; }
    .address-copy-group .server-address { font-size: 0.85em; padding: 5px 8px;}
    .copy-btn { padding: 5px 8px; }
}
