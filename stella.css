/* --- グローバル設定 & リセット改善 --- */
:root {
    --primary-color: #6A82FB;  /* より鮮やかでモダンなブルー */
    --secondary-color: #79E2B1; /* フレッシュなミントグリーン */
    --accent-color: #FFCB6B;   /* 明るいアクセントイエロー */
    --dark-bg: #1A1D2A;        /* 深みのあるダークブルー系背景 */
    --medium-dark-bg: #24283B; /* カードやセクション背景 */
    --light-bg: #2E344B;       /* ホバー時や明るめの要素 */
    --text-color: #E0E0E0;     /* 可読性の高い明るいテキスト */
    --text-muted: #A0A8C0;   /* 少し抑えたテキスト */
    --border-color: #383E56;
    --glass-bg: rgba(46, 52, 75, 0.6); /* ガラス風背景 */
    --font-primary: 'Poppins', 'Noto Sans JP', sans-serif;
    --font-secondary: 'Noto Sans JP', sans-serif;
    --shadow-soft: 0 4px 15px rgba(0,0,0,0.1);
    --shadow-medium: 0 8px 25px rgba(0,0,0,0.15);
    --shadow-strong: 0 12px 35px rgba(0,0,0,0.2);
    --border-radius-sm: 6px;
    --border-radius-md: 12px; /* 少し大きめに */
    --border-radius-lg: 20px;
    --transition-fast: 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --transition-normal: 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

*, *::before, *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
    font-size: 100%; /* 1rem = 16px */
}

body {
    font-family: var(--font-primary);
    background-color: var(--dark-bg);
    color: var(--text-color);
    line-height: 1.7;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden; /* 横スクロール防止 */
}
body.no-scroll {
    overflow-y: hidden; /* スマホメニュー表示時 */
}

.container {
    width: 90%;
    max-width: 1140px; /* 少し広めに */
    margin: 0 auto;
    padding: 0 20px; /* 左右のpaddingを少し増やす */
}

img { max-width: 100%; height: auto; display: block; }
a { text-decoration: none; color: var(--secondary-color); transition: color var(--transition-fast); }
a:hover { color: var(--accent-color); }

h1, h2, h3, h4 { font-family: var(--font-primary); font-weight: 700; margin-bottom: 0.6em; color: var(--text-color); line-height: 1.25; }
h1 { font-size: clamp(2.5em, 6vw, 4.2em); letter-spacing: -0.02em; }
.section-title, h2 { font-size: clamp(1.8em, 4.5vw, 2.8em); margin-bottom: 0.8em; text-align: center; font-weight: 700; }
.section-subtitle { font-size: clamp(0.95em, 2.5vw, 1.1em); text-align: center; color: var(--text-muted); margin: -0.5em auto 2.5em auto; max-width: 650px; font-weight: 400; }
h3 { font-size: clamp(1.25em, 3vw, 1.6em); font-weight: 600; }
h4 { font-size: clamp(1.05em, 2.5vw, 1.2em); font-weight: 500; }

p { margin-bottom: 1.1em; font-family: var(--font-secondary); color: var(--text-muted); font-size: clamp(0.9rem, 2vw, 1rem); }
.small-text { font-size: 0.8rem; color: #8A92A9; }
code { background-color: var(--light-bg); padding: 0.3em 0.7em; border-radius: var(--border-radius-sm); font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace; color: var(--accent-color); border: 1px solid var(--border-color); font-size: 0.85em; }

/* --- アニメーションクラス --- */
.animate-on-scroll, .animate-on-load { opacity: 0; transform: translateY(30px); transition: opacity 0.6s var(--transition-normal), transform 0.6s var(--transition-normal); }
.animate-on-scroll.fadeInUp, .animate-on-load.fadeInUp { opacity: 1; transform: translateY(0); }
.animate-on-scroll.fadeInLeft, .animate-on-load.fadeInLeft { opacity: 0; transform: translateX(-40px); }
.animate-on-scroll.fadeInLeft.fadeInUp, .animate-on-load.fadeInLeft.fadeInUp { opacity: 1; transform: translateX(0); } /* 実際にはfadeInUpが優先される */
.animate-on-scroll.fadeInRight, .animate-on-load.fadeInRight { opacity: 0; transform: translateX(40px); }
.animate-on-scroll.fadeInRight.fadeInUp, .animate-on-load.fadeInRight.fadeInUp { opacity: 1; transform: translateX(0); }
.animate-on-scroll.zoomIn, .animate-on-load.zoomIn { opacity: 0; transform: scale(0.8); }
.animate-on-scroll.zoomIn.fadeInUp, .animate-on-load.zoomIn.fadeInUp { opacity: 1; transform: scale(1); }
.animate-on-scroll.bounceIn, .animate-on-load.bounceIn {
    opacity: 0; animation-name: bounceInAnimation; animation-duration: 0.75s; animation-fill-mode: forwards; animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
}
@keyframes bounceInAnimation {
  0% { opacity: 0; transform: scale3d(.3, .3, .3); }
  20% { transform: scale3d(1.1, 1.1, 1.1); }
  40% { transform: scale3d(.9, .9, .9); }
  60% { opacity: 1; transform: scale3d(1.03, 1.03, 1.03); }
  80% { transform: scale3d(.97, .97, .97); }
  100% { opacity: 1; transform: scale3d(1, 1, 1); }
}


/* --- ヘッダー --- */
header {
    background-color: transparent; /* 初期は完全に透明 */
    padding: 18px 0;
    position: fixed;
    width: 100%;
    top: 0;
    left: 0;
    z-index: 1000;
    transition: background-color var(--transition-normal), box-shadow var(--transition-normal), padding var(--transition-normal);
}
header.scrolled {
    background-color: var(--glass-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: var(--shadow-soft);
    padding: 12px 0;
}
header .container { display: flex; justify-content: space-between; align-items: center; }
#logo-img { height: 42px; transition: transform var(--transition-fast); filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2)); }
#logo-img:hover { transform: scale(1.05); }

.main-nav ul { list-style: none; display: flex; align-items: center; }
.main-nav ul li { margin-left: 28px; }
.main-nav ul li a { color: #FFF; /* ヘッダー透明時は白文字 */ font-weight: 500; font-size: 0.95rem; padding: 8px 4px; position: relative; letter-spacing: 0.4px; text-shadow: 0 1px 3px rgba(0,0,0,0.3); }
header.scrolled .main-nav ul li a { color: var(--text-color); text-shadow: none; }
.main-nav ul li a::after { content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 2px; background-color: var(--accent-color); transition: width var(--transition-fast); }
.main-nav ul li a:hover::after, .main-nav ul li a.active::after { width: 100%; }

.hamburger-menu { display: none; background: none; border: none; cursor: pointer; padding: 8px; z-index: 1001; margin-left: 15px; }
.hamburger-bar { display: block; width: 24px; height: 2.5px; background-color: #FFF; /* ヘッダー透明時は白 */ margin: 5px 0; transition: all var(--transition-normal); border-radius: 3px; }
header.scrolled .hamburger-bar { background-color: var(--text-color); }
.hamburger-menu.active .hamburger-bar:nth-child(1) { transform: translateY(7.5px) rotate(45deg); }
.hamburger-menu.active .hamburger-bar:nth-child(2) { opacity: 0; }
.hamburger-menu.active .hamburger-bar:nth-child(3) { transform: translateY(-7.5px) rotate(-45deg); }

/* --- ボタン --- */
.btn {
    display: inline-flex; align-items: center; justify-content: center;
    padding: 12px 28px;
    border-radius: var(--border-radius-md);
    font-weight: 600; font-size: 0.95rem; letter-spacing: 0.3px;
    transition: all var(--transition-fast);
    cursor: pointer; border: none;
    box-shadow: var(--shadow-soft);
    white-space: nowrap;
    position: relative; overflow: hidden; /* ホバーエフェクト用 */
}
.btn::before { /* ホバー時のグラデーションエフェクト */
    content: ""; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
    background: linear-gradient(120deg, transparent, rgba(255,255,255,0.25), transparent);
    transition: left var(--transition-normal);
}
.btn:hover::before { left: 100%; }

.btn-icon-left { margin-right: 10px; font-size: 1.1em; }
.btn-primary { background: linear-gradient(135deg, var(--primary-color), #8A79F7); color: #FFF; }
.btn-primary:hover { transform: translateY(-3px) scale(1.03); box-shadow: var(--shadow-medium); }
.btn-secondary { background-color: var(--medium-dark-bg); color: var(--secondary-color); border: 1.5px solid var(--secondary-color); }
.btn-secondary:hover { background-color: var(--secondary-color); color: var(--dark-bg); transform: translateY(-3px) scale(1.03); box-shadow: 0 6px 18px rgba(var(--rgb-secondary-color, 121, 226, 177), 0.25); }
.btn-discord { background-color: #5865F2; color: #fff; border: 1.5px solid #5865F2; }
.btn-discord:hover { background-color: #4B57D0; border-color: #4B57D0; transform: translateY(-3px) scale(1.03); box-shadow: 0 6px 18px rgba(88, 101, 242, 0.25); color: #fff; }


/* --- ヒーローセクション --- */
#hero {
    min-height: 100vh; /* 画面の高さいっぱい */
    position: relative;
    display: flex; align-items: center; justify-content: center; text-align: center;
    padding-top: 80px; /* ヘッダー分考慮 */
    overflow: hidden;
}
.hero-background-image { /* パララックス用要素 */
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: url('images/hero-background.jpg') no-repeat center center/cover; /* ここに背景画像 */
    z-index: -2;
    transform: scale(1.1); /* 初期状態で少し拡大（スクロールで縮小してパララックス感を出す） */
    transition: transform 8s cubic-bezier(0,0,0,1); /* ゆっくり変化 */
}
body:not(.no-scroll) #hero.scrolled-past .hero-background-image { /* JavaScriptでスクロール検知してクラス付与想定 */
    transform: scale(1) translateY(10%); /* 例: 少し下にずらしながら縮小 */
}
/* CSSのみの簡易パララックス風 (スクロールと同期はしない) */
@media (prefers-reduced-motion: no-preference) {
  .hero-background-image { animation: slowPan 30s infinite alternate ease-in-out; }
}
@keyframes slowPan {
  0% { transform: scale(1.1) translate(0,0); }
  100% { transform: scale(1.15) translate(5%, 5%); } /* 画像が少し動くように */
}

.hero-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(26, 29, 42, 0.5) 0%, rgba(26, 29, 42, 0.8) 70%, var(--dark-bg) 100%); z-index: -1; }
.hero-content { position: relative; z-index: 1; padding-bottom: 40px; }
#hero h1 { color: #FFF; text-shadow: 0 3px 10px rgba(0,0,0,0.6); margin-bottom: 0.3em; }
#hero .subtitle { color: var(--text-muted); font-size: clamp(1.05em, 2.8vw, 1.4em); margin-bottom: 2.2em; max-width: 600px; margin-left: auto; margin-right: auto; text-shadow: 0 1px 3px rgba(0,0,0,0.4); font-weight: 400; }
.hero-buttons { display: flex; gap: 18px; justify-content: center; flex-wrap: wrap; }
.hero-buttons .btn { min-width: 190px; padding: 14px 30px; }


/* --- コンテンツセクション共通 --- */
.content-section { padding: 80px 0; position: relative; overflow: hidden; /* アニメーション要素のはみ出し防止 */ }
.content-section.alt-bg { background-color: var(--medium-dark-bg); border-top: 1px solid var(--border-color); border-bottom: 1px solid var(--border-color); }


/* --- Features (魅力) セクション --- */
.features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; }
.feature-card {
    background: var(--medium-dark-bg);
    padding: 30px; border-radius: var(--border-radius-lg); text-align: center;
    transition: transform var(--transition-normal), box-shadow var(--transition-normal), background-color var(--transition-normal);
    border: 1px solid var(--border-color);
    display: flex; flex-direction: column; align-items: center;
    box-shadow: var(--shadow-soft);
}
.feature-card:hover { transform: translateY(-10px); box-shadow: var(--shadow-medium); background-color: var(--light-bg); }
.feature-icon-wrapper {
    width: 80px; height: 80px; /* アイコンサイズアップ */
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    display: inline-flex; align-items: center; justify-content: center;
    margin-bottom: 22px; color: var(--dark-bg); flex-shrink: 0;
    box-shadow: 0 4px 10px rgba(var(--rgb-primary-color, 106, 130, 251), 0.3);
    transition: transform 0.3s ease;
}
.feature-card:hover .feature-icon-wrapper { transform: scale(1.1) rotate(5deg); }
.feature-icon-wrapper i { font-size: 2.2em; /* アイコン内フォントサイズ */ }
.feature-card h3 { color: var(--text-color); font-size: 1.35em; margin-bottom: 10px; font-weight: 600; }
.feature-card p { font-size: 0.9rem; color: var(--text-muted); line-height: 1.65; flex-grow: 1; }

/* --- Join (参加方法) セクション --- */
#join { padding: 70px 0 90px 0; /* 下に少し多めに余白 */ }
.join-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    justify-content: center;
}
.join-card-new {
    background: var(--medium-dark-bg);
    border-radius: var(--border-radius-lg);
    padding: 30px;
    width: 100%;
    max-width: 420px; /* 最大幅設定 */
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-soft);
    transition: transform var(--transition-normal), box-shadow var(--transition-normal);
}
.join-card-new:hover { transform: translateY(-8px); box-shadow: var(--shadow-medium); }
.join-card-new.java { border-left: 5px solid var(--primary-color); }
.join-card-new.bedrock { border-left: 5px solid var(--secondary-color); }

.join-card-new-header { display: flex; align-items: center; margin-bottom: 20px; }
.platform-icon-new { font-size: 2.5em; margin-right: 15px; width: 40px; text-align: center; }
.join-card-new.java .platform-icon-new { color: var(--primary-color); }
.join-card-new.bedrock .platform-icon-new { color: var(--secondary-color); }
.join-card-new-header h3 { color: var(--text-color); font-size: 1.5em; margin-bottom: 0; font-weight: 600; }

.join-card-new-body p:not(.join-note-new) { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 6px; font-weight: 500; }
.address-group { display: flex; margin-bottom: 15px; position: relative; }
.address-group input[type="text"] {
    flex-grow: 1; padding: 10px 12px;
    background-color: var(--dark-bg); color: var(--text-color);
    border: 1px solid var(--border-color); border-radius: var(--border-radius-sm) 0 0 var(--border-radius-sm);
    font-size: 0.95em; outline: none;
    transition: border-color var(--transition-fast);
}
.address-group input[type="text"]:focus { border-color: var(--primary-color); }
.copy-button-new {
    padding: 10px 12px; background-color: var(--primary-color); color: #FFF;
    border: none; border-radius: 0 var(--border-radius-sm) var(--border-radius-sm) 0;
    cursor: pointer; font-size: 0.95em; transition: background-color var(--transition-fast);
    position: relative; /* ツールチップ用 */
}
.copy-button-new:hover { background-color: #536DF5; }
.copy-button-new .fa-copy { font-size: 1.1em; }
.copy-tooltip {
    position: absolute; bottom: 125%; left: 50%; transform: translateX(-50%);
    background-color: var(--light-bg); color: var(--text-color);
    padding: 6px 10px; border-radius: var(--border-radius-sm);
    font-size: 0.75rem; white-space: nowrap;
    opacity: 0; visibility: hidden; transition: opacity var(--transition-fast), visibility var(--transition-fast);
    box-shadow: var(--shadow-soft);
}
.copy-button-new:hover .copy-tooltip, .copy-button-new .copy-tooltip.copied { opacity: 1; visibility: visible; }
.copy-button-new .copy-tooltip.copied { background-color: var(--secondary-color); color: var(--dark-bg); }

.join-note-new { font-size: 0.85rem; color: var(--text-muted); margin-top: 15px; text-align: center; }
.join-note-new code { background-color: var(--dark-bg); }


/* --- Rules Preview / Support Preview --- */
#rules-preview p, #support-preview p { max-width: 600px; }
.rules-highlights { display: flex; justify-content: center; gap: 18px; margin-bottom: 30px; flex-wrap: wrap; }
.rule-highlight { background-color: var(--medium-dark-bg); padding: 10px 18px; border-radius: var(--border-radius-md); font-size: 0.9rem; border: 1px solid var(--border-color); color: var(--text-muted); transition: transform var(--transition-fast), box-shadow var(--transition-fast); }
.rule-highlight:hover { transform: translateY(-3px); box-shadow: var(--shadow-soft); }
.rule-highlight i { margin-right: 8px; }
.rule-highlight .fa-user-shield { color: var(--primary-color); }
.rule-highlight .fa-handshake-slash { color: var(--accent-color); }
.rule-highlight .fa-user-secret { color: #BF616A; } /* Nord Red */


/* --- WebMap Promo / Discord Promo --- */
#webmap-promo p, #discord-promo .discord-content p { max-width: 600px; }
#discord-promo { padding: 0; /* 背景色で全体を覆うため */ }
.discord-bg {
    background: linear-gradient(135deg, #5865F2, #424CB2);
    color: #fff; padding: 80px 0; overflow: hidden; position: relative;
}
/* Discord 背景の装飾 (任意) */
.discord-bg::before, .discord-bg::after {
    content: ''; position: absolute; border-radius: 50%; opacity: 0.1;
    animation: pulse 5s infinite ease-in-out;
}
.discord-bg::before { width: 300px; height: 300px; background: #FFF; top: -100px; left: -100px; }
.discord-bg::after { width: 400px; height: 400px; background: var(--secondary-color); bottom: -150px; right: -150px; animation-delay: 2.5s; }
@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.15); } }

.discord-content { max-width: 600px; margin: 0 auto; text-align: center; position: relative; z-index: 1; }
.discord-promo-main-icon { font-size: 5em; margin-bottom: 20px; display: block; color: #FFF; }
.discord-bg h2, .discord-bg p { color: #fff; text-shadow: 0 1px 3px rgba(0,0,0,0.2); }
.discord-bg .btn-discord { background-color: #FFF; color: #5865F2; font-weight: 700; }
.discord-bg .btn-discord:hover { background-color: #E0E0E0; transform: translateY(-3px) scale(1.03); box-shadow: 0 6px 18px rgba(255,255,255,0.2); }


/* --- Footer --- */
footer { background-color: var(--dark-bg); border-top: 1px solid var(--border-color); padding: 35px 0; text-align: center; }
footer p { color: var(--text-muted); font-size: 0.85rem; margin-bottom: 5px; }


/* --- レスポンシブ対応 --- */
@media (max-width: 992px) {
    .features-grid { grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 25px; }
    .join-wrapper { flex-direction: column; align-items: center; }
    .join-card-new { max-width: 500px; } /* スマホでは横幅広めに */
    .section-title, h2 { margin-bottom: 0.6em; }
    .section-subtitle { margin-bottom: 2em; }
}

@media (max-width: 768px) {
    .main-nav {
        display: none; position: absolute;
        top: 100%; /* ヘッダーの真下に */
        left: 0; right: 0; /* 幅いっぱいに */
        width: auto; /* 幅はautoに */
        background-color: var(--medium-dark-bg);
        flex-direction: column; padding: 15px 0;
        box-shadow: var(--shadow-medium);
        border-top: 1px solid var(--border-color);
        max-height: calc(100vh - 65px); /* ヘッダーの高さを考慮 */
        overflow-y: auto;
        z-index: 999; /* ハンバーガーメニューより手前に */
    }
    header.scrolled .main-nav { /* スクロール時も追従 */
        top: 100%;
    }

    .main-nav.active { display: flex; }
    .main-nav ul { flex-direction: column; width: 100%; }
    .main-nav ul li { margin: 0; width: 100%; }
    .main-nav ul li a { display: block; padding: 14px 25px; text-align: left; border-bottom: 1px solid var(--border-color); font-size: 1rem; color: var(--text-color); text-shadow: none; } /* 強制的に文字色 */
    .main-nav ul li:last-child a { border-bottom: none; }
    .main-nav ul li a::after { display: none; }
    .hamburger-menu { display: block; }

    #hero { min-height: 85vh; padding: 100px 0 60px 0; } /* スマホ用ヒーローセクション高さ */
    .hero-buttons { gap: 15px; }
    .hero-buttons .btn { width: 90%; max-width: 300px; margin: 0 auto; padding: 13px 25px; font-size: 0.9rem; }

    .content-section { padding: 60px 0; }
    #join { padding: 60px 0 70px 0; }

    .features-grid { grid-template-columns: 1fr; gap: 20px; }
    .feature-card { padding: 25px; }
    .feature-icon-wrapper { width: 70px; height: 70px; margin-bottom: 18px;}
    .feature-icon-wrapper i { font-size: 2em; }

    .join-card-new { padding: 25px; }
    .join-card-new-header h3 { font-size: 1.3em; }
    .platform-icon-new { font-size: 2.2em; }

    .rules-highlights { gap: 12px; }
    .rule-highlight { padding: 8px 15px; font-size: 0.85rem; }
}

@media (max-width: 480px) {
    body { font-size: 15px; line-height: 1.65; }
    .container { padding: 0 15px; } /* スマホでは左右paddingを少し詰める */
    h1 { font-size: clamp(2em, 8vw, 2.8em); }
    .section-title, h2 { font-size: clamp(1.6em, 6vw, 2.2em); }
    .section-subtitle { font-size: clamp(0.9em, 3.5vw, 1em); margin-bottom: 1.8em; }

    .btn { padding: 12px 22px; font-size: 0.9rem; }
    .hero-buttons .btn { width: 100%; max-width: 280px; }

    .feature-card { padding: 20px; }
    .feature-card p { font-size: 0.85rem; }

    .join-card-new { padding: 20px; }
    .address-group input[type="text"], .copy-button-new { padding: 9px 10px; font-size: 0.9em; }
    .join-note-new { font-size: 0.8rem; }
    .copy-tooltip { font-size: 0.7rem; padding: 5px 8px;}

    .discord-promo-main-icon { font-size: 4em; margin-bottom: 15px; }
    .discord-bg { padding: 60px 0; }
}
