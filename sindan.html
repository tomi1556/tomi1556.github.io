<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraftã‚µãƒ¼ãƒãƒ¼ ãƒ—ãƒ¬ã‚¤ã‚¹ã‚¿ã‚¤ãƒ«è¨ºæ–­ã€ç©¶æ¥µç‰ˆã€‘</title>
    <style>
        /* ====== Google Fonts & åŸºæœ¬è¨­å®š ====== */
        @import url('https://fonts.googleapis.com/css2?family=DotGothic16&family=M_PLUS_Rounded_1c:wght@500;800&display=swap');

        :root {
            --font-pixel: 'DotGothic16', sans-serif;
            --font-main: 'M PLUS Rounded 1c', sans-serif;
            --bg-color: #161618;
            --surface-color: rgba(30, 27, 41, 0.75);
            --primary-color: #82aaff;
            --text-color: #eaeaea;
            --text-muted: #9a9aab;
            --border-color: rgba(130, 170, 255, 0.2);
            --shadow-color: rgba(0, 0, 0, 0.6);
            --highlight-color: #c792ea;
            --xp-bar-color: #60e040;
            --tenkuu-color: #8be9fd;
            --bouken-color: #f1fa8c;
            --seikatsu-color: #ffb86c;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: var(--font-main);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: var(--bg-color);
            background-image: 
                radial-gradient(var(--text-muted) 0.5px, transparent 0.5px),
                radial-gradient(var(--text-muted) 0.5px, var(--bg-color) 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            overflow-y: auto;
            padding: 1rem;
        }

        /* ====== ã‚³ãƒ³ãƒ†ãƒŠã¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ ====== */
        .container {
            width: 100%;
            max-width: 720px;
            background-color: var(--surface-color);
            backdrop-filter: blur(12px);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            box-shadow: 0 20px 50px var(--shadow-color);
            overflow: hidden;
            transition: all 0.5s ease-in-out;
        }

        /* ====== ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ ====== */
        #start-screen { padding: 50px; text-align: center; }
        #start-screen h1 {
            font-family: var(--font-pixel);
            font-size: 2.8rem;
            color: #fff;
            margin-bottom: 1rem;
            text-shadow: 0 0 15px var(--primary-color);
            line-height: 1.4;
        }
        #start-screen p { font-size: 1.1rem; line-height: 1.8; margin-bottom: 2.5rem; color: var(--text-muted); }
        .start-btn {
            font-family: var(--font-pixel);
            font-size: 1.5rem; padding: 16px 45px;
            background: var(--primary-color);
            color: #111;
            border: none; border-radius: 12px; cursor: pointer;
            box-shadow: 0 5px 0 #4a68ad, 0 8px 15px rgba(0,0,0,0.4);
            transition: all 0.1s ease-out;
            font-weight: bold; text-shadow: 0 1px 1px rgba(255,255,255,0.3);
        }
        .start-btn:hover { transform: translateY(-2px); box-shadow: 0 7px 0 #4a68ad, 0 10px 20px rgba(0,0,0,0.3); }
        .start-btn:active { transform: translateY(4px); box-shadow: 0 1px 0 #4a68ad, 0 2px 5px rgba(0,0,0,0.4); }
        
        /* ====== è¨ºæ–­ç”»é¢ ====== */
        #quiz-screen { padding: 40px; display: none; }
        #progress-bar {
            width: 100%; height: 8px; background-color: rgba(0,0,0,0.3);
            border-radius: 4px; overflow: hidden; margin-bottom: 2rem;
        }
        #progress { width: 0%; height: 100%; background: var(--primary-color); transition: width 0.5s ease; }
        .question-container { opacity: 0; }
        #question-text {
            font-size: 1.8rem; font-weight: 800;
            margin-bottom: 2rem; line-height: 1.6;
            color: #fff;
        }
        .options-container { display: grid; grid-template-columns: 1fr; gap: 1rem; }
        .option-btn {
            width: 100%; padding: 16px 20px; font-size: 1.1rem;
            font-weight: 500;
            background-color: rgba(0,0,0,0.3);
            border: 2px solid var(--border-color);
            color: var(--text-color);
            border-radius: 12px; cursor: pointer;
            text-align: left; transition: background-color 0.2s ease, border-color 0.2s ease;
        }
        .option-btn:hover { background-color: rgba(130, 170, 255, 0.2); border-color: var(--primary-color); }
        
        /* ====== çµæœç”»é¢ ====== */
        #result-screen { padding: 40px; text-align: center; display: none; }
        #result-screen > * { opacity: 0; }
        #result-screen h2 {
            font-family: var(--font-pixel); font-size: 1.5rem;
            margin-bottom: 1rem; color: var(--text-muted);
        }
        #result-svg-container { margin-bottom: 1.5rem; }
        #result-svg { width: 100%; max-width: 300px; }
        #result-svg .corner-label { font-family: var(--font-pixel); fill: var(--text-muted); font-size: 14px; }
        #result-svg .lines { stroke: var(--border-color); stroke-width: 1.5; }
        #result-svg .corners { fill: var(--border-color); }
        #result-point { fill: var(--highlight-color); r: 0; transition: r 0.5s ease, cx 0.5s ease, cy 0.5s ease; }
        #result-point-halo { fill: var(--highlight-color); r: 0; transition: r 0.5s ease, cx 0.5s ease, cy 0.5s ease; opacity: 0.3; }
        .analysis-details { opacity: 0; transform: translateY(20px); transition: opacity 0.5s, transform 0.5s; }
        #archetype-title {
            font-size: 2.2rem; font-weight: 800;
            color: #fff; margin-bottom: 1rem;
        }
        #archetype-description {
            font-size: 1.1rem; line-height: 1.9;
            text-align: left;
        }
        .restart-btn {
            margin-top: 2rem; font-family: var(--font-pixel);
            font-size: 1.2rem; padding: 12px 30px;
            background-color: rgba(0,0,0,0.3); color: var(--text-color);
            border: 2px solid var(--border-color); cursor: pointer;
            border-radius: 8px; transition: all 0.2s ease;
        }
        .restart-btn:hover { background-color: var(--primary-color); border-color: var(--primary-color); color: #111; font-weight: bold; }

        /* ====== ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾© ====== */
        .anim-fade-in { animation: fadeIn 0.8s ease-out forwards; }
        .anim-fade-out { animation: fadeOut 0.4s ease-in forwards; }
        .anim-slide-in-up { animation: slideInUp 0.6s cubic-bezier(0.25, 1, 0.5, 1) forwards; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
        @keyframes slideInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        
        /* ====== ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ ====== */
        @media (max-width: 680px) {
            body { padding: 0.5rem; }
            #start-screen h1 { font-size: 2.2rem; }
            #quiz-screen, #start-screen, #result-screen { padding: 25px; }
            #question-text { font-size: 1.4rem; }
            #archetype-title { font-size: 1.8rem; }
        }
    </style>
</head>
<body>

    <div class="container" id="container">
        <div id="start-screen" class="anim-fade-in">
            <h1>Minecraft<br>ãƒ—ãƒ¬ã‚¤ã‚¹ã‚¿ã‚¤ãƒ«è¨ºæ–­ã€ç©¶æ¥µç‰ˆã€‘</h1>
            <p>10ã®ã‚·ãƒŠãƒªã‚ªãŒã€ã‚ãªãŸã®ãƒ—ãƒ¬ã‚¤ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç²¾å¯†ã«åˆ†æã€‚<br>æœ€é«˜ã®ã‚µãƒ¼ãƒãƒ¼ä½“é¨“ã¸ã®æ‰‰ã‚’é–‹ã“ã†ã€‚</p>
            <button class="start-btn" id="start-btn">è¨ºæ–­ã‚’é–‹å§‹ã™ã‚‹</button>
        </div>

        <div id="quiz-screen">
            <div id="progress-bar"><div id="progress"></div></div>
            <div id="question-wrapper"></div>
        </div>

        <div id="result-screen">
            <h2 class="result-anim">ã‚ãªãŸã®ãƒ—ãƒ¬ã‚¤ã‚¹ã‚¿ã‚¤ãƒ«ã‚’åˆ†æä¸­...</h2>
            <div id="result-svg-container" class="result-anim">
                <svg id="result-svg" viewBox="0 0 300 270">
                    <g class="lines">
                        <line x1="150" y1="20" x2="30" y2="230"></line>
                        <line x1="30" y1="230" x2="270" y2="230"></line>
                        <line x1="270" y1="230" x2="150" y2="20"></line>
                    </g>
                    <g class="corners">
                        <circle cx="150" cy="20" r="8"></circle>
                        <circle cx="30" cy="230" r="8"></circle>
                        <circle cx="270" cy="230" r="8"></circle>
                    </g>
                    <g class="corner-labels">
                        <text class="corner-label" x="150" y="10" text-anchor="middle">ğŸï¸ å¤©ç©º</text>
                        <text class="corner-label" x="20" y="250" text-anchor="middle">ğŸ§­ å†’é™º</text>
                        <text class="corner-label" x="280" y="250" text-anchor="middle">ğŸ¡ ç”Ÿæ´»</text>
                    </g>
                    <g>
                        <circle id="result-point-halo" cx="150" cy="160" r="0"></circle>
                        <circle id="result-point" cx="150" cy="160" r="0"></circle>
                    </g>
                </svg>
            </div>
            <div class="analysis-details">
                <h3 id="archetype-title"></h3>
                <p id="archetype-description"></p>
                <button class="restart-btn" id="restart-btn">ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>
            </div>
        </div>
    </div>
    
    <audio id="click-sound" preload="auto" src="data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU0HT19OALe/ub+3v7W/tb20vrS+s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO9s72zvbO-"></audio>
    <audio id="result-sound" preload="auto" src="data:audio/wav;base64,UklGRoh+AABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQBofAAAAP//AgAJAAYADwAbABoAFgAJAP//AwAIAAcACwAUABUADgAEAPkABQADAAUACwASABQADQADAPkABgAEAAUACwAUABQADgADAPgABwAFAAYADQATABQADwAEAPkABQACAAcADQAUABMADgACAPkACAAEAAQACwATABQADgADAPgABgADAAQADQATABQADgADAPgABgAEAAUADQATABMADgAEAPcABwAFAAYADgATABMADgADAPgABgADAAQADQASABMADwAEAPcABwAFAAYADQASABMADgADAPgABQADAAQADQASABMADwAEAPcABwAFAAYADQASABMADgADAPgABQADAAQADQASABMADwAEAPcABQAEAAcADQASABMADgACAPkACAAFAAYADQASABMADgADAPgABQADAAQACwASABMADwAEAPcABwAFAAYADQASABQADgADAPgABQACAAQADQASABQADwAEAPcABwAFAAYADQASABMADgADAPgABQADAAQADQASABMADwAEAPcABQAEAAcADQASABQADgADAPgACAAFAAYADQASABMADgADAPgABQADAAQACwASABMADwAEAPcABwAFAAYADQASABQADgADAPgABQACAAQADQASABQADwAEAPcABwAFAAYADQASABMADgADAPgABQADAAQADQASABMADwAEAPcABQAEAAcADQASABQADgADAPgACAAFAAYADQASABMADgAEAPcABgAFAAUADQATABQADgADAPgABQACAAUACwATABMADgAEAPgABwAFAAYADQATABQADwAEAPcABwAFAAYADQATABQADwAEAPgABwAFAAYADgATABMADgAEAPgABgAEAAUADgATABMADgAEAPgABwAFAAYADgATABQADwADAPgABgAEAAUADQATABMADgAEAPcABwAFAAYADQATABMADgADAPgABgADAAQADQATABMADwAEAPcABwAFAAYADQATABMADgAEAPgABgAEAAUADgATABMADgADAPgABwAFAAYADQATABQADwAEAPcABwAFAAYADQATABMADgADAPgABgADAAQADQATABMADwAEAPcABwAFAAYADQATABMADgAEAPgABgAEAAUADQATABMADgAEAPgABwAFAAYADQATABQADwADAPgABgAEAAUACwATABMADgAEAPcABwAFAAYADQATABQADgADAPgABgADAAQADQATABQADwAEAPcABgAFAAYADQATABQADgAEAPgABgAEAAUADgATABMADgAEAPgABwAFAAYADQATABQADwADAPgABgAEAAUACwATABMADgAABABAAQsDFgMnAysDRQRaBgMAAAAA//8B/gD8AP8BAwIFAQ4CHQEnAS8BOAFDAU0BUgFhAWsBcwF/AYYBigGOAY8BkwGVAZgBmwGfAaIBpQGqAa4BswG6Ab4BwwHHAdEB0wHWAd0B4AHkAesB8AHyAfYB+AH+AgECCQIOAhYCHQEkASkBMQE7AUIBSQFMAVIAVwFbAWQBawF0AXkBfwGJAZsBox/DGb0ZpBmuGacZqBmqGaoZpxmnGaYapiqfKp4rni2LqAxoDKfMaYyoTKiMqEyojKgMaAxoC+gL6AvoC6fLZsslyycK5MrkytgLQAtfS1eLGUsaixqK2YrKitlKSUo5CcdJxwmmyKaIdMa0ArYAtUC0QLLAsMevx6sHqgeoB6XHSMdHB0eGxsZGBkXGRYaEhMQDw8JDwcFAwICAv7+/v38/Pn49/f39vf29fX08/Py8u/u7evq6ejn5eLh4N/d3dva2dbV09HT0c/NzMvKyMjExsPCwcG/vr28ury5t7i3tLW0s7GwsK+ur6uqqamnp6WkpaOjoaSioaGg/+De3drY1NPS0M7My8fGwsK+vby5t7W0srCvrqmpqaalpKSioaGfn56dnZyanJuaWlhXV1RTUVFQT05NTEpKSkdGRUM/PDs5ODc1NDMyLy0rKScmJSQjIiAfHx4dHBsaGRgWFRQRDg0LCQgHBgQCAf/+/v39/f39/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v-"></audio>

    <script>
        // ======== DOMè¦ç´ ã¨åŠ¹æœéŸ³ã®å®šç¾© ========
        const DOM = {
            startScreen: document.getElementById('start-screen'),
            quizScreen: document.getElementById('quiz-screen'),
            resultScreen: document.getElementById('result-screen'),
            startBtn: document.getElementById('start-btn'),
            restartBtn: document.getElementById('restart-btn'),
            questionWrapper: document.getElementById('question-wrapper'),
            progress: document.getElementById('progress'),
            resultPoint: document.getElementById('result-point'),
            resultPointHalo: document.getElementById('result-point-halo'),
            analysisDetails: document.querySelector('.analysis-details'),
        };
        
        // â˜…ä¿®æ­£ç‚¹: åŠ¹æœéŸ³ã®è¦ç´ ã‚’å–å¾—ã™ã‚‹å®šç¾©ã‚’è¿½åŠ 
        const clickSound = document.getElementById('click-sound');
        const resultSound = document.getElementById('result-sound');
        
        const quizData = [
            { question: "ãƒ¯ãƒ¼ãƒ«ãƒ‰ç”Ÿæˆç›´å¾Œã€æœ€åˆã®å¤œã¾ã§ã«æœ€å„ªå…ˆã™ã‚‹ã“ã¨ã¯ï¼Ÿ", options: [
                { text: "åŠ¹ç‡çš„ãªãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ç‹©ã‚Šã®ãŸã‚ã®ãƒˆãƒ©ãƒƒãƒ—ã‚’ä½œã‚‹", scores: { tenkuu: 3, bouken: 1, seikatsu: 0 } },
                { text: "æ™¯è‰²ã®è‰¯ã„å ´æ‰€ã‚’æ¢ã—ã€ä»®ã®å®¶ã§ã‚‚å†…è£…ã‚’é£¾ã‚‹", scores: { tenkuu: 0, bouken: 1, seikatsu: 3 } },
                { text: "æ´çªŸã‚’æ¢æ¤œã—ã€é‰„ã‚„çŸ³ç‚­ã‚’ã§ãã‚‹ã ã‘å¤šãé›†ã‚ã‚‹", scores: { tenkuu: 1, bouken: 3, seikatsu: 1 } }
            ]},
            { question: "æ´çªŸã§ã‚¾ãƒ³ãƒ“ã‚¹ãƒãƒŠãƒ¼ã‚’ç™ºè¦‹ï¼ã©ã†ã™ã‚‹ï¼Ÿ", options: [
                { text: "å³åº§ã«æœ€é«˜ã®åŠ¹ç‡ã‚’èª‡ã‚‹XPãƒˆãƒ©ãƒƒãƒ—ã«æ”¹é€ ã™ã‚‹", scores: { tenkuu: 3, bouken: 0, seikatsu: 1 } },
                { text: "å‘¨ã‚Šã‚’é£¾ã‚Šä»˜ã‘ã€ã‚¹ãƒªãƒ«æº€ç‚¹ã®æˆ¦é—˜éƒ¨å±‹ã«ã™ã‚‹", scores: { tenkuu: 0, bouken: 2, seikatsu: 3 } },
                { text: "æ¾æ˜ã§æ¹§ãæ½°ã—ã€ãŠå®ã ã‘å–ã£ã¦å…ˆã¸é€²ã‚€", scores: { tenkuu: 1, bouken: 3, seikatsu: 0 } }
            ]},
            { question: "ã‚ãªãŸã®å»ºç¯‰ã‚¹ã‚¿ã‚¤ãƒ«ã«æœ€ã‚‚è¿‘ã„ã®ã¯ï¼Ÿ", options: [
                { text: "æ©Ÿèƒ½ç¾ã‚’è¿½æ±‚ã—ãŸã€ç„¡é§„ã®ãªã„è‡ªå‹•åŒ–æ–½è¨­", scores: { tenkuu: 3, bouken: 0, seikatsu: 1 } },
                { text: "ç‰©èªã‚’æ„Ÿã˜ã‚‹ã€å¤ä»£éºè·¡ã‚„ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ãªåŸ", scores: { tenkuu: 0, bouken: 3, seikatsu: 2 } },
                { text: "æ‘ã‚„è¡—ä¸¦ã¿ãªã©ã€ç”Ÿæ´»æ„Ÿã‚ãµã‚Œã‚‹ãƒªã‚¢ãƒ«ãªå»ºç¯‰", scores: { tenkuu: 1, bouken: 1, seikatsu: 3 } }
            ]},
            { question: "æ–°ã—ã„è£…å‚™ã‚¨ãƒ³ãƒãƒ£ãƒ³ãƒˆã€ä½•ã‚’é¸ã¶ï¼Ÿ", options: [
                { text: "çµŒé¨“å€¤åŠ¹ç‡UPã®ãŸã‚ã®ã€Œä¿®ç¹•ã€ã€ŒåŠ¹ç‡å¼·åŒ–ã€", scores: { tenkuu: 3, bouken: 1, seikatsu: 1 } },
                { text: "æ°´ä¸­å‘¼å¸ã‚„è½ä¸‹è€æ€§ãªã©ã€æ¢ç´¢ç”¨ã®ç‰¹æ®Šèƒ½åŠ›", scores: { tenkuu: 0, bouken: 3, seikatsu: 0 } },
                { text: "è¦‹ãŸç›®ãŒæ ¼å¥½è‰¯ã„å‰£ã«ã€è–ãªã‚‹åŠ›ï¼ˆãƒ€ãƒ¡ãƒ¼ã‚¸å¢—ï¼‰", scores: { tenkuu: 1, bouken: 1, seikatsu: 3 } }
            ]},
            { question: "æ‘äººã¨ã®å–å¼•ã€ä¸»ãªç›®çš„ã¯ï¼Ÿ", options: [
                { text: "å¸æ›¸ã‚’å³é¸ã—ã€æœ€å¼·ã®ã‚¨ãƒ³ãƒãƒ£ãƒ³ãƒˆæœ¬ã‚’é›†ã‚ã‚‹", scores: { tenkuu: 3, bouken: 1, seikatsu: 0 } },
                { text: "æ¢æ¤œå®¶ã®åœ°å›³ã‚’è²·ã„ã€æœªçŸ¥ã®æ§‹é€ ç‰©ã‚’æ¢ã—ã«è¡Œã", scores: { tenkuu: 0, bouken: 3, seikatsu: 1 } },
                { text: "æ‘ã‚’æ‹¡å¤§ã•ã›ã€ä½æ°‘ã¨ã®ç”Ÿæ´»ã‚’æ¥½ã—ã‚€", scores: { tenkuu: 1, bouken: 0, seikatsu: 3 } }
            ]},
            { question: "ãƒ¬ãƒƒãƒ‰ã‚¹ãƒˆãƒ¼ãƒ³ã€ã‚ãªãŸã«ã¨ã£ã¦ã©ã‚“ãªå­˜åœ¨ï¼Ÿ", options: [
                { text: "å…¨ã¦ã®ä½œæ¥­ã‚’è‡ªå‹•åŒ–ã™ã‚‹ãŸã‚ã®å¿…é ˆãƒ„ãƒ¼ãƒ«", scores: { tenkuu: 3, bouken: 1, seikatsu: 0 } },
                { text: "éš ã—æ‰‰ã‚„ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ã®ã‚®ãƒŸãƒƒã‚¯ã«ä½¿ã†ã¨é¢ç™½ã„", scores: { tenkuu: 1, bouken: 3, seikatsu: 1 } },
                { text: "å°‘ã—è§¦ã‚‹ç¨‹åº¦ã€‚æ‰‹ä½œæ¥­ã®ã»ã†ãŒæ€§ã«åˆã£ã¦ã„ã‚‹", scores: { tenkuu: 0, bouken: 0, seikatsu: 3 } }
            ]},
            { question: "æ—…ã®é€”ä¸­ã§è¦‹ã¤ã‘ãŸç¾ã—ã„ãƒã‚¤ã‚ªãƒ¼ãƒ ã€‚ã©ã†ã™ã‚‹ï¼Ÿ", options: [
                { text: "è³‡æºãŒè±Šå¯Œãªã‚‰ã€åŠ¹ç‡çš„ãªæ‹ ç‚¹ã‚’ä½œã‚‹", scores: { tenkuu: 3, bouken: 1, seikatsu: 1 } },
                { text: "è‡ªç„¶ã‚’å£Šã•ã¬ã‚ˆã†ã€é¢¨æ™¯ã«æº¶ã‘è¾¼ã‚€å®¶ã‚’å»ºã¦ã‚‹", scores: { tenkuu: 0, bouken: 2, seikatsu: 3 } },
                { text: "åœ°å›³ã«å°ã‚’ã¤ã‘ã€å¿ƒã«ç„¼ãä»˜ã‘ã¦æ¬¡ã®å ´æ‰€ã¸", scores: { tenkuu: 0, bouken: 3, seikatsu: 0 } }
            ]},
            { question: "ã‚µãƒ¼ãƒãƒ¼ã§ã®ä¸»ãªé£Ÿæ–™èª¿é”æ–¹æ³•ã¯ï¼Ÿ", options: [
                { text: "å…¨è‡ªå‹•ã®ç„¼ãé³¥è£½é€ æ©Ÿã‚„æ˜†å¸ƒåç©«æ©Ÿã‚’ä½œã‚‹", scores: { tenkuu: 3, bouken: 0, seikatsu: 1 } },
                { text: "æ§˜ã€…ãªå‹•ç‰©ã‚’è‚²ã¦ã€å¤§ããªç‰§å ´ã§ã®ã³ã®ã³æš®ã‚‰ã™", scores: { tenkuu: 1, bouken: 1, seikatsu: 3 } },
                { text: "æ¢æ¤œå…ˆã§è¦‹ã¤ã‘ãŸã‚‚ã®ã‚’é£Ÿã¹ã€ã‚µãƒã‚¤ãƒãƒ«ã‚’æ¥½ã—ã‚€", scores: { tenkuu: 0, bouken: 3, seikatsu: 0 } }
            ]},
            { question: "ãƒã‚¶ãƒ¼ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆï¼æœ€åˆã«ä½•ã‚’ã™ã‚‹ï¼Ÿ", options: [
                { text: "ãƒã‚¶ãƒ©ã‚¤ãƒˆè£…å‚™ã®ãŸã‚ã€å¤ä»£ã®æ®‹éª¸ã‚’å…¨åŠ›ã§æ¢ã™", scores: { tenkuu: 3, bouken: 2, seikatsu: 0 } },
                { text: "æ–°ãƒã‚¤ã‚ªãƒ¼ãƒ ã‚’ã™ã¹ã¦å·¡ã‚Šã€æ–°ã—ã„å»ºæã‚’é›†ã‚ã‚‹", scores: { tenkuu: 0, bouken: 3, seikatsu: 2 } },
                { text: "å®‰å…¨ãªå ´æ‰€ã«æ‹ ç‚¹ã‚’ç¯‰ãã€åœ°é“ã«æ¢ç´¢ç¯„å›²ã‚’åºƒã’ã‚‹", scores: { tenkuu: 1, bouken: 1, seikatsu: 3 } }
            ]},
            { question: "ã‚¨ãƒªãƒˆãƒ©ã‚’æ‰‹ã«å…¥ã‚ŒãŸï¼ä¸»ãªä½¿ã„é“ã¯ï¼Ÿ", options: [
                { text: "ã‚·ãƒ¥ãƒ«ã‚«ãƒ¼ãƒœãƒƒã‚¯ã‚¹ã¨çµ„ã¿åˆã‚ã›ã€è³‡æé‹æ¬ã‚’åŠ¹ç‡åŒ–", scores: { tenkuu: 3, bouken: 1, seikatsu: 0 } },
                { text: "èª°ã‚‚è¦‹ãŸã“ã¨ã®ãªã„ã€ãƒ¯ãƒ¼ãƒ«ãƒ‰ã®æœã¦ã‚’ç›®æŒ‡ã—ã¦é£›ã¶", scores: { tenkuu: 1, bouken: 3, seikatsu: 0 } },
                { text: "è‡ªåˆ†ã®å»ºç¯‰ç‰©ã‚’æ§˜ã€…ãªè§’åº¦ã‹ã‚‰çœºã‚ã¦æ¥½ã—ã‚€", scores: { tenkuu: 0, bouken: 1, seikatsu: 3 } }
            ]}
        ];

        let currentQuestionIndex = 0;
        let scores = { tenkuu: 0, bouken: 0, seikatsu: 0 };
        
        const playSound = (sound) => { sound.currentTime = 0; sound.play().catch(e => {}); };
        const shuffle = (array) => array.sort(() => Math.random() - 0.5);

        function startQuiz() {
            playSound(clickSound);
            currentQuestionIndex = 0;
            scores = { tenkuu: 0, bouken: 0, seikatsu: 0 };
            
            DOM.startScreen.classList.remove('anim-fade-in');
            DOM.startScreen.classList.add('anim-fade-out');
            
            setTimeout(() => {
                DOM.startScreen.style.display = 'none';
                DOM.quizScreen.style.display = 'block';
                showQuestion();
            }, 400);
        }
        
        function showQuestion() {
            const questionData = quizData[currentQuestionIndex];
            DOM.progress.style.width = `${((currentQuestionIndex) / quizData.length) * 100}%`;
            
            const shuffledOptions = shuffle([...questionData.options]);
            
            const questionContainer = document.createElement('div');
            questionContainer.className = 'question-container';
            questionContainer.innerHTML = `
                <h2 id="question-text">${questionData.question}</h2>
                <div class="options-container">
                    ${shuffledOptions.map(option => `
                        <button class="option-btn" data-scores='${JSON.stringify(option.scores)}'>${option.text}</button>
                    `).join('')}
                </div>`;
            
            DOM.questionWrapper.innerHTML = '';
            DOM.questionWrapper.appendChild(questionContainer);
            questionContainer.classList.add('anim-slide-in-up');
            
            document.querySelectorAll('.option-btn').forEach(button => {
                button.addEventListener('click', handleOptionClick);
            });
        }
        
        function handleOptionClick(event) {
            playSound(clickSound);
            const selectedScores = JSON.parse(event.target.dataset.scores);
            Object.keys(selectedScores).forEach(key => scores[key] += selectedScores[key]);
            
            currentQuestionIndex++;
            DOM.questionWrapper.firstElementChild.classList.add('anim-fade-out');
            setTimeout(() => {
                if (currentQuestionIndex < quizData.length) {
                    showQuestion();
                } else {
                    showResult();
                }
            }, 400);
        }

        function getResultArchetype(percentages) {
            const p = percentages;
            const primary = Object.keys(p).reduce((a, b) => p[a] > p[b] ? a : b);

            if (p[primary] > 0.65) { // 65%ä»¥ä¸Šã§ç‰¹åŒ–å‹
                if (primary === 'tenkuu') return { title: "ç´”ç²‹ãªã‚‹æœ€é©åŒ–ä¸»ç¾©è€…", desc: "ã‚ãªãŸã¯ã€ã‚ã‚‰ã‚†ã‚‹ç‰©äº‹ã‚’åŠ¹ç‡åŒ–ã™ã‚‹ã“ã¨ã«ç©¶æ¥µã®å–œã³ã‚’æ„Ÿã˜ã‚‹ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€‚ã‚ãªãŸã®ä½œã‚‹è‡ªå‹•åŒ–è£…ç½®ã‚„ãƒˆãƒ©ãƒƒãƒ—ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã®çµŒæ¸ˆã™ã‚‰å‹•ã‹ã™åŠ›ã‚’æŒã¤ã§ã—ã‚‡ã†ã€‚å¤©ç©ºé¯–ã¯ã€ãã®æ‰èƒ½ã‚’æœ€å¤§é™ã«ç™ºæ®ã§ãã‚‹å ´æ‰€ã§ã™ã€‚" };
                if (primary === 'bouken') return { title: "ç”Ÿç²‹ã®ãƒ¯ãƒ¼ãƒ«ãƒ‰æ¢æ¤œå®¶", desc: "ã‚ãªãŸã¯ã€åœ°å›³ã®ç©ºç™½ã‚’åŸ‹ã‚ã€æœªçŸ¥ã®æ™¯è‰²ã‚’ç™ºè¦‹ã™ã‚‹ã“ã¨ã«æƒ…ç†±ã‚’ç‡ƒã‚„ã™å†’é™ºå®¶ã€‚ã¾ã èª°ã‚‚è¦‹ãŸã“ã¨ã®ãªã„çµ¶æ™¯ã‚„ã€èªã‚‰ã‚Œã–ã‚‹ç‰©èªã®ç—•è·¡ãŒã€ã‚ãªãŸã‚’å¾…ã£ã¦ã„ã¾ã™ã€‚å†’é™ºé¯–ã®åºƒå¤§ãªä¸–ç•ŒãŒã€ã‚ãªãŸã®å¿ƒã‚’æº€ãŸã™ã§ã—ã‚‡ã†ã€‚" };
                if (primary === 'seikatsu') return { title: "ä¸–ç•Œã‚’å‰µé€ ã™ã‚‹å»ºç¯‰å®¶", desc: "ã‚ãªãŸã¯ã€ãƒ–ãƒ­ãƒƒã‚¯ä¸€ã¤ä¸€ã¤ã«æƒ³ã„ã‚’è¾¼ã‚ã€ç¾ã—ã„å»ºç¯‰ã‚„è¡—ä¸¦ã¿ã‚’ä½œã‚Šä¸Šã’ã‚‹ã“ã¨ã«å¹¸ã›ã‚’æ„Ÿã˜ã‚‹ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã€‚ã‚ãªãŸã®ä½œå“ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã®æ­´å²ã¨ãªã‚Šã€å¤šãã®äººã€…ã®å¿ƒã‚’ç™’ã™ã§ã—ã‚‡ã†ã€‚ç”Ÿæ´»é¯–ã¯ã€ã‚ãªãŸã®ã‚­ãƒ£ãƒ³ãƒã‚¹ã§ã™ã€‚" };
            }

            const secondary = Object.keys(p).filter(k => k !== primary).reduce((a, b) => p[a] > p[b] ? a : b);

            if (primary === 'tenkuu') {
                if (secondary === 'bouken') return { title: "éºè·¡ã‚’æ”»ç•¥ã™ã‚‹ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼", desc: "ã‚ãªãŸã¯ã€åŠ¹ç‡çš„ãªæ”»ç•¥æ³•ã‚’ç·¨ã¿å‡ºã—ã€å¤ä»£éºè·¡ã‚„ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ã®ãŠå®ã‚’æ ¹ã“ããæ‰‹ã«å…¥ã‚Œã‚‹ã“ã¨ã«é•·ã‘ãŸãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€‚å†’é™ºã®ã‚¹ãƒªãƒ«ã¨ã€å ±é…¬ã®æœ€å¤§åŒ–ã‚’ä¸¡ç«‹ã™ã‚‹ã‚ãªãŸã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯ã€å†’é™ºé¯–ã¨å¤©ç©ºé¯–ã®ä¸¡æ–¹ã§è¼ãã¾ã™ã€‚" };
                return { title: "è‡ªå‹•åŒ–å¸å›½ã®å»ºå›½è€…", desc: "ã‚ãªãŸã¯ã€ç”Ÿæ´»ã‚’è±Šã‹ã«ã™ã‚‹ãŸã‚ã®è¶…å·¨å¤§ãªè‡ªå‹•è¾²å ´ã‚„ä»•åˆ†ã‘å€‰åº«ã‚’è¨­è¨ˆãƒ»å»ºç¯‰ã™ã‚‹ã€ã‚¤ãƒ³ãƒ•ãƒ©ã®ç‹ã€‚ã‚ãªãŸã®ä½œã‚‹æ–½è¨­ã¯ã€ç”Ÿæ´»é¯–ã®çµŒæ¸ˆåŸºç›¤ã‚’æ”¯ãˆã€å¤šãã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’åŠ©ã‘ã‚‹ã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚" };
            }
            if (primary === 'bouken') {
                if (secondary === 'tenkuu') return { title: "ä¼èª¬ã®è£…å‚™ã‚’æ±‚ã‚ã‚‹å†’é™ºå®¶", desc: "ã‚ãªãŸã¯ã€æœ€å¼·ã®è£…å‚™ã¨é“å…·ã‚’æƒãˆã€å±é™ºãªç§˜å¢ƒã¸ã‚‚è‡†ã›ãšæŒ‘ã‚€ã€å®ŸåŠ›æ´¾ã®å†’é™ºå®¶ã€‚å†’é™ºé¯–ã®ã¾ã è¦‹ã¬æ•µã‚„ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ã¯ã€ã‚ãªãŸã®ãã®åŠ›ã‚’è©¦ã™æœ€é«˜ã®èˆå°ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚å¤©ç©ºé¯–ã®åŠ¹ç‡åŒ–æŠ€è¡“ã‚‚å½¹ç«‹ã¡ã¾ã™ã€‚" };
                return { title: "é¢¨æ™¯ã‚’æ„›ã™ã‚‹æ—…äººå»ºç¯‰å®¶", desc: "ã‚ãªãŸã¯ã€æ—…ã®é€”ä¸­ã§è¦‹ã¤ã‘ãŸç¾ã—ã„é¢¨æ™¯ã«ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å—ã‘ã€ãã®åœŸåœ°ã«æº¶ã‘è¾¼ã‚€ã‚ˆã†ãªå»ºç¯‰ã‚’ä½œã‚‹ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã€‚ã‚ãªãŸã®ä½œã‚‹å®¶ã‚„æ‘ã¯ã€å†’é™ºã®æ€ã„å‡ºã¨ãªã‚Šã€ç”Ÿæ´»é¯–ã‚’å½©ã‚‹ã‚¢ãƒ¼ãƒˆä½œå“ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚" };
            }
            if (primary === 'seikatsu') {
                if (secondary === 'tenkuu') return { title: "è¡—ã‚’ç™ºå±•ã•ã›ã‚‹éƒ½å¸‚è¨ˆç”»å®¶", desc: "ã‚ãªãŸã¯ã€ç¾ã—ã„è¡—ä¸¦ã¿ã¨ã€ãã“ã«ä½ã‚€äººã€…ã®ç”Ÿæ´»ã‚’æ”¯ãˆã‚‹ãŸã‚ã®åŠ¹ç‡çš„ãªã‚¤ãƒ³ãƒ•ãƒ©ã‚’ä¸¡ç«‹ã•ã›ã‚‹ã€å„ªã‚ŒãŸãƒªãƒ¼ãƒ€ãƒ¼ã€‚ã‚ãªãŸã®ä½œã‚‹è¡—ã¯ã€ç”Ÿæ´»é¯–ã®ä¸­å¿ƒã¨ãªã‚Šã€å¤©ç©ºé¯–ã®æŠ€è¡“ãŒãã®ç™ºå±•ã‚’åŠ é€Ÿã•ã›ã¾ã™ã€‚" };
                return { title: "ç‰©èªã‚’ç´¡ããƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼", desc: "ã‚ãªãŸã¯ã€è‡ªã‚‰ã®å»ºç¯‰ã«ç‰©èªã‚’è¾¼ã‚ã€ä»²é–“ã¨å…±ã«ã‚µãƒ¼ãƒãƒ¼ã®ä¸–ç•Œè¦³ã‚’æ·±ãæ¥½ã—ã‚€ã“ã¨ãŒã§ãã‚‹ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€‚ç”Ÿæ´»é¯–ã§ã®å»ºç¯‰ã¨ã€å†’é™ºé¯–ã§ã®æ¢ç´¢ã¯ã€ã‚ãªãŸã«ã¨ã£ã¦ä¸€ã¤ã®å£®å¤§ãªç‰©èªã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚" };
            }

            return { title: "ä¸‡èƒ½ãªã‚‹ã‚µãƒã‚¤ãƒãƒ¼", desc: "ã‚ãªãŸã¯ã„ã‹ãªã‚‹ç’°å¢ƒã«ã‚‚é©å¿œã—ã€åŠ¹ç‡ãƒ»å†’é™ºãƒ»ç”Ÿæ´»ã®ã™ã¹ã¦ã‚’é«˜ã„ãƒ¬ãƒ™ãƒ«ã§æ¥½ã—ã‚€ã“ã¨ãŒã§ãã‚‹ã‚ªãƒ¼ãƒ«ãƒ©ã‚¦ãƒ³ãƒ€ãƒ¼ã€‚ç‰¹å®šã®ã‚µãƒ¼ãƒãƒ¼ã«ç¸›ã‚‰ã‚Œãšã€æ°—åˆ†ã«åˆã‚ã›ã¦æ§˜ã€…ãªãƒ—ãƒ¬ã‚¤ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¿½æ±‚ã™ã‚‹ã“ã¨ã§ã€ç„¡é™ã®æ¥½ã—ã¿ãŒè¦‹ã¤ã‹ã‚‹ã§ã—ã‚‡ã†ã€‚" };
        }

        function showResult() {
            DOM.progress.style.width = '100%';
            setTimeout(() => {
                DOM.quizScreen.classList.add('anim-fade-out');
                setTimeout(() => {
                    DOM.quizScreen.style.display = 'none';
                    DOM.quizScreen.classList.remove('anim-fade-out');

                    DOM.resultScreen.style.display = 'block';
                    DOM.resultScreen.querySelectorAll('.result-anim').forEach(el => el.classList.add('anim-fade-in'));
                    
                    playSound(resultSound);

                    const totalScore = Object.values(scores).reduce((a, b) => a + b, 1);
                    const percentages = {
                        tenkuu: scores.tenkuu / totalScore,
                        bouken: scores.bouken / totalScore,
                        seikatsu: scores.seikatsu / totalScore
                    };
                    
                    const p = percentages;
                    const coords = {
                        tenkuu: { x: 150, y: 20 },
                        bouken: { x: 30, y: 230 },
                        seikatsu: { x: 270, y: 230 }
                    };
                    const finalX = coords.tenkuu.x * p.tenkuu + coords.bouken.x * p.bouken + coords.seikatsu.x * p.seikatsu;
                    const finalY = coords.tenkuu.y * p.tenkuu + coords.bouken.y * p.bouken + coords.seikatsu.y * p.seikatsu;
                    
                    setTimeout(() => {
                        DOM.resultPoint.setAttribute('cx', finalX);
                        DOM.resultPoint.setAttribute('cy', finalY);
                        DOM.resultPointHalo.setAttribute('cx', finalX);
                        DOM.resultPointHalo.setAttribute('cy', finalY);
                        DOM.resultPoint.style.r = 8;
                        DOM.resultPointHalo.style.r = 20;
                    }, 500);

                    setTimeout(() => {
                        const archetype = getResultArchetype(percentages);
                        DOM.analysisDetails.querySelector('#archetype-title').textContent = `ã€${archetype.title}ã€‘`;
                        DOM.analysisDetails.querySelector('#archetype-description').textContent = archetype.desc;
                        DOM.analysisDetails.style.opacity = 1;
                        DOM.analysisDetails.style.transform = 'translateY(0)';
                    }, 1500);

                }, 400);
            }, 500);
        }
        
        function restartQuiz() {
            playSound(clickSound);
            DOM.resultScreen.classList.add('anim-fade-out');
            setTimeout(() => {
                DOM.resultScreen.style.display = 'none';
                DOM.resultScreen.classList.remove('anim-fade-out');

                DOM.startScreen.classList.remove('anim-fade-out');
                DOM.startScreen.style.display = 'block';
                DOM.startScreen.classList.add('anim-fade-in');

                // Reset result animation elements
                DOM.analysisDetails.style.opacity = 0;
                DOM.analysisDetails.style.transform = 'translateY(20px)';
                DOM.resultPoint.style.r = 0;
                DOM.resultPointHalo.style.r = 0;
                DOM.resultPoint.setAttribute('cx', '150');
                DOM.resultPoint.setAttribute('cy', '160');
                DOM.resultPointHalo.setAttribute('cx', '150');
                DOM.resultPointHalo.setAttribute('cy', '160');
            }, 400);
        }

        DOM.startBtn.addEventListener('click', startQuiz);
        DOM.restartBtn.addEventListener('click', restartQuiz);
    </script>
</body>
</html>
