<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>サーバー状況 - StellaMC</title>
    <link rel="stylesheet" href="stella.css"> <link rel="stylesheet" href="status.css"> <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <header>
        <div class="container">
            <a href="index.html" class="logo-link" aria-label="StellaMC ホームへ">
                <img src="logo.png" alt="StellaMC ロゴ" id="logo-img">
            </a>
            <nav class="main-nav" id="main-navigation">
                <ul>
                    <li><a href="index.html" class="nav-link-item">ホーム</a></li>
                    <li><a href="rules.html" class="nav-link-item">ルール</a></li>
                    <li><a href="support.html" class="nav-link-item">支援</a></li>
                    <li><a href="status.html" class="active nav-link-item">サーバー状況</a></li> <li><a href="http://stellamc.jp:6903/" target="_blank" rel="noopener noreferrer" class="nav-link-item">WebMap</a></li>
                    <li><a href="https://discord.gg/jurMJk7gqa" target="_blank" rel="noopener noreferrer" class="nav-link-item nav-discord-link"><i class="fab fa-discord"></i> Discord</a></li>
                </ul>
            </nav>
            <button class="hamburger-menu" aria-label="メニューを開閉する" aria-expanded="false" aria-controls="main-navigation">
                <span class="hamburger-bar"></span>
                <span class="hamburger-bar"></span>
                <span class="hamburger-bar"></span>
            </button>
        </div>
    </header>

    <main class="page-content-container">
        <div class="container">
            <div class="page-header animate-on-load" data-animation="fadeInUpCustom">
                <h1 class="page-main-title"><i class="fas fa-server icon-header"></i>サーバー稼働状況</h1>
                <p class="page-intro">
                    StellaMCの現在のサーバー状況やオンラインプレイヤーを確認できます。<br>
                    リアルタイム更新！（実際の表示にはAPI連携が必要です）
                </p>
            </div>

            <section id="overall-status" class="status-section animate-on-scroll" data-animation="fadeInUpCustom" data-animation-delay="0.1s">
                <h2 class="section-heading-styled"><i class="fas fa-network-wired"></i>総合ステータス</h2>
                <div class="overall-status-card">
                    <div class="status-indicator online">
                        <span>オンライン</span> <div class="pulse-dot"></div>
                    </div>
                    <div class="server-main-address">
                        <p><strong><i class="fas fa-desktop"></i> Java版:</strong> <code>stellamc.jp</code></p>
                        <p><strong><i class="fas fa-mobile-alt"></i> 統合版:</strong> <code>stellamc.jp</code> (ポート: <code>6911</code>)</p>
                    </div>
                    <div class="total-players">
                        <i class="fas fa-users"></i>
                        現在の総プレイヤー数: <span class="player-count" id="total-player-count">25</span> / <span id="max-player-count">100</span>
                        </div>
                </div>
            </section>

            <div class="server-cards-wrapper">
                <section id="sutera-server-status" class="status-section individual-server-section animate-on-scroll" data-animation="fadeInLeftCustom" data-animation-delay="0.2s">
                    <h3 class="server-name-title"><i class="fas fa-star server-title-icon"></i>すてら鯖</h3>
                    <div class="status-card">
                        <div class="status-card-header">
                            <div class="status-indicator online small"><span>オンライン</span> <div class="pulse-dot"></div></div>
                            <div class="server-address-port"><code>stellamc.jp:6908</code></div>
                        </div>
                        <div class="server-player-info">
                            <p>プレイヤー数: <span class="player-count" id="sutera-player-count">15</span> / <span id="sutera-max-players">50</span></p>
                        </div>
                        <h4>オンラインプレイヤー:</h4>
                        <div class="player-list-grid" id="sutera-player-list">
                            <div class="player-avatar bedrock-player" title=".PlayerBedrock1">
                                <img src="https://minotar.net/avatar/.PlayerBedrock1/32.png" alt="PlayerBedrock1">
                                <span class="player-name">.PlayerBedrock1</span>
                                <span class="player-type-badge bedrock"><i class="fas fa-mobile-alt"></i></span>
                            </div>
                            <div class="player-avatar java-player" title="PlayerJava1">
                                <img src="https://minotar.net/avatar/PlayerJava1/32.png" alt="PlayerJava1">
                                <span class="player-name">PlayerJava1</span>
                                <span class="player-type-badge java"><i class="fas fa-desktop"></i></span>
                            </div>
                            <div class="player-avatar java-player" title="PlayerJava2_LongName">
                                <img src="https://minotar.net/avatar/PlayerJava2_LongName/32.png" alt="PlayerJava2_LongName">
                                <span class="player-name">PlayerJava2_LongName</span>
                                <span class="player-type-badge java"><i class="fas fa-desktop"></i></span>
                            </div>
                            <div class="player-avatar-placeholder"></div>
                            <div class="player-avatar-placeholder"></div>
                        </div>
                        <p class="no-players-message" style="display:none;">現在オンラインのプレイヤーはいません。</p>
                    </div>
                </section>

                <section id="vanilla-server-status" class="status-section individual-server-section animate-on-scroll" data-animation="fadeInRightCustom" data-animation-delay="0.3s">
                    <h3 class="server-name-title"><i class="fas fa-leaf server-title-icon"></i>バニラ鯖</h3>
                    <div class="status-card">
                        <div class="status-card-header">
                            <div class="status-indicator online small"><span>オンライン</span> <div class="pulse-dot"></div></div>
                            <div class="server-address-port"><code>stellamc.jp:6910</code></div>
                        </div>
                        <div class="server-player-info">
                            <p>プレイヤー数: <span class="player-count" id="vanilla-player-count">10</span> / <span id="vanilla-max-players">30</span></p>
                        </div>
                        <h4>オンラインプレイヤー:</h4>
                        <div class="player-list-grid" id="vanilla-player-list">
                            <div class="player-avatar java-player" title="VanillaPlayer1">
                                <img src="https://minotar.net/avatar/VanillaPlayer1/32.png" alt="VanillaPlayer1">
                                <span class="player-name">VanillaPlayer1</span>
                                <span class="player-type-badge java"><i class="fas fa-desktop"></i></span>
                            </div>
                             <div class="player-avatar bedrock-player" title=".BedrockEnjoyer">
                                <img src="https://minotar.net/avatar/.BedrockEnjoyer/32.png" alt=".BedrockEnjoyer">
                                <span class="player-name">.BedrockEnjoyer</span>
                                <span class="player-type-badge bedrock"><i class="fas fa-mobile-alt"></i></span>
                            </div>
                            </div>
                         <p class="no-players-message" style="display:none;">現在オンラインのプレイヤーはいません。</p>
                    </div>
                </section>
            </div>
             <p class="page-closing animate-on-scroll" data-animation="fadeInUpCustom" data-animation-delay="0.4s" style="margin-top: 40px;">
                サーバーの稼働状況は数分おきに更新される予定です。<br>
                もし接続できない場合は、Discordサーバーでお知らせを確認するか、運営までお問い合わせください。
            </p>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; <span id="current-year"></span> StellaMC. All Rights Reserved.</p>
            <p class="small-text">Minecraft is a trademark of Mojang Synergies AB. This server is not affiliated with Mojang Synergies AB.</p>
        </div>
    </footer>

    <script>
        // index.html と同じ基本JavaScript（ハンバーガーメニュー、ヘッダースクロール、フッター年、アニメーション）
        document.addEventListener('DOMContentLoaded', () => {
            const hamburger = document.querySelector('.hamburger-menu');
            const nav = document.querySelector('.main-nav');
            if (hamburger && nav) {
                const navLinks = nav.querySelectorAll('a.nav-link-item');
                hamburger.addEventListener('click', () => {
                    const isActive = hamburger.classList.toggle('active');
                    nav.classList.toggle('active');
                    hamburger.setAttribute('aria-expanded', isActive);
                    document.body.classList.toggle('no-scroll', isActive);
                });
                navLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        if (nav.classList.contains('active')) {
                            hamburger.classList.remove('active');
                            nav.classList.remove('active');
                            hamburger.setAttribute('aria-expanded', 'false');
                            document.body.classList.remove('no-scroll');
                        }
                    });
                });
            }

            const header = document.querySelector('header');
            if (header) {
                 window.addEventListener('scroll', () => {
                    if (window.scrollY > 25) {
                        header.classList.add('scrolled');
                    } else {
                        header.classList.remove('scrolled');
                    }
                });
            }

            const currentYearEl = document.getElementById('current-year');
            if (currentYearEl) currentYearEl.textContent = new Date().getFullYear();

            const animatedElements = document.querySelectorAll('.animate-on-scroll, .animate-on-load');
             if (animatedElements.length > 0 && typeof IntersectionObserver !== 'undefined') {
                const observer = new IntersectionObserver((entries, observerInstance) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const animationType = entry.target.dataset.animation || 'fadeInUpCustom';
                            const animationDelay = entry.target.dataset.animationDelay || '0s';
                            entry.target.style.animationDelay = animationDelay;
                            entry.target.classList.add(animationType, 'is-visible');
                            observerInstance.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1, rootMargin: "0px 0px -10px 0px" });

                animatedElements.forEach(el => {
                    const rect = el.getBoundingClientRect();
                    const isInitiallyVisible = rect.top < window.innerHeight && rect.bottom >= 0;
                    const delayMultiplier = el.classList.contains('animate-on-load') ? 1000 : 0;

                    if (el.classList.contains('animate-on-load') || isInitiallyVisible) {
                        const animationType = el.dataset.animation || 'fadeInUpCustom';
                        const animationDelay = el.dataset.animationDelay || '0s';
                        el.style.animationDelay = animationDelay;
                        setTimeout(() => el.classList.add(animationType, 'is-visible'), parseFloat(animationDelay.replace('s','')) * delayMultiplier + 5);
                    } else {
                        observer.observe(el);
                    }
                });
            }

            // --- ここからステータスページ専用のダミーデータ更新 (実際はAPIから取得) ---
            // この部分は実際のAPI連携コードに置き換えてください。
            function updatePlayerCount(elementId, current, max) {
                const el = document.getElementById(elementId);
                if (el) el.textContent = current;
                const maxEl = document.getElementById(elementId.replace('-count', '-max-players')); // 例: sutera-max-players
                if (maxEl) maxEl.textContent = max;
            }

            // ダミーデータ
            updatePlayerCount('total-player-count', 25, 100);
            updatePlayerCount('sutera-player-count', 15, 50);
            updatePlayerCount('vanilla-player-count', 10, 30);

            // プレイヤースキンリストのダミー表示 (Sutera)
            const suteraPlayerList = document.getElementById('sutera-player-list');
            if(suteraPlayerList && suteraPlayerList.children.length > 2) { // プレースホルダー以外にプレイヤーがいる場合
                // (何もしない - HTMLのプレースホルダーが初期表示)
            } else if (suteraPlayerList) { // プレイヤーがいない（または少ない）場合
                const noPlayersMsg = suteraPlayerList.nextElementSibling; // .no-players-message
                if (noPlayersMsg) noPlayersMsg.style.display = 'block';
                // プレースホルダーを削除または非表示にする処理
                 Array.from(suteraPlayerList.getElementsByClassName('player-avatar-placeholder')).forEach(ph => ph.style.display = 'none');
            }
            // Vanilla鯖も同様に
            const vanillaPlayerList = document.getElementById('vanilla-player-list');
            if(vanillaPlayerList && vanillaPlayerList.children.length > 0) {
                // (何もしない)
            } else if (vanillaPlayerList) {
                const noPlayersMsg = vanillaPlayerList.nextElementSibling;
                if (noPlayersMsg) noPlayersMsg.style.display = 'block';
            }
            // --- ダミーデータ更新ここまで ---

        });
    </script>
</body>
</html>
